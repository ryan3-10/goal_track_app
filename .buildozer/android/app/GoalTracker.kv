WindowManager:
    HomeWindow:
    AddWindow:
    SuccessWindow:
    DetailsWindow:
    SessionWindow:
    ConfirmWindow:

<TextInput>
    pos_hint: {"center_x": 0.5}
    background_color: (150/255, 150/255, 150/255, 1)
    font_size: sp(21)
    multiline: False
    size_hint_y: None
    height: 60

<Label>
    font_size: sp(26)
    bold: True

<Button>
    size_hint_x: 0.9
    pos_hint: {"center_x": 0.5}
    background_normal: ""
    background_color: (13/255, 72/255, 133/255)
    bold: True
    font_size: sp(16)

<BoxLayout>
    spacing: sp(15)
    padding: sp(30)

<GridLayout>
    spacing: sp(5)
    padding: sp(5)
<HomeWindow>
    name: "home"

    BoxLayout:
        id: layout
        orientation: "vertical"
        size: root.width, root.height

        Label:
            font_size: 42
            size_hint_y: 0.3
            text: "My Goals"
        
        Button:
            on_release: 
                app.user.set_current_goal(root.goal0)
                root.manager.transition.direction = "left"

        Button:
            on_release: 
                app.user.set_current_goal(root.goal1)
                root.manager.transition.direction = "left"
    
        Button:
            on_release: 
                app.user.set_current_goal(root.goal2)
                root.manager.transition.direction = "left"

        Button:
            on_release: 
                app.user.set_current_goal(root.goal3)
                root.manager.transition.direction = "left"
        
        Button:
            on_release: 
                app.user.set_current_goal(root.goal4)
                root.manager.transition.direction = "left"

<DetailsWindow>
    name: "details"

<ConfirmWindow>
    name: "confirm deletion"

    BoxLayout:
        orientation: "vertical"
        size_hint_y: 0.5
        pos_hint: {"center_y": 0.5}

        Label:
            text: "Are you sure you want to remove this goal?"
            font_size: 24
        
        Label:
            text: "All goal data will be lost."
            font_size: 24
        
        Label:
            text: "Lost data cannot be retrieved."
            font_size: 24
        
        Button:
            text: "Yes, remove goal"
            background_color: app.red
            on_release:
                app.user.remove_goal(app.user.get_current_goal())
                app.root.current = "home"
                root.manager.transition.direction = "right"
        
        Button: 
            text: "Cancel"
            on_release:
                app.root.current = "details"
                root.manager.transition.direction = "right"

<AddWindow>
    name: "add"

    BoxLayout:
        orientation: "vertical"

        BoxLayout:
            orientation: "vertical"

            Label:
                text: "Goal Title"

            TextInput:
                id: goal_title
                on_text: root.on_text(self, self.text)
        
        BoxLayout:
            orientation: "vertical"

            Label:
                text: "Goal Type"
            
            GridLayout:
                id: toggles
                cols: 3
                size_hint_x: 1
                size_hint_y: 1.5
            
                ToggleButton: 
                    id: daily
                    text: "Daily"
                    group: type
                    on_release: root.set_cycle_length(1)
                    background_color: app.red

                ToggleButton:
                    id: weekly
                    text: "Weekly"
                    group: type
                    on_release: root.set_cycle_length(7)
                    background_color: app.red
                
                ToggleButton:
                    id: monthly
                    text: " Monthly\n(30 days)"
                    group: type
                    on_release: root.set_cycle_length(30)
                    background_color: app.red
        
        BoxLayout:
            orientation: "vertical"

            Label: 
                text: "Target number of hours"
            
            GridLayout:
                cols: 5

                Button:
                    text: "-10"
                    on_release: root.update_hours(-10)
                
                Button:
                    text: "-1"
                    on_release: root.update_hours(-1)

                Label:
                    id: hours
                    text: "0"
                
                Button:
                    text: "+1"
                    on_release: root.update_hours(1)
                
                Button:
                    text: "+10"
                    on_release: root.update_hours(10)
        
        Label:
            id: error_label
            text: "You already have a goal with that title"
            bold: False
            size_hint_y: None
            height: 10
        
        Button:
            text: "Add Goal"
            id: add_goal
            background_color: app.green
            size_hint_y: 0.5
            on_release:
                root.try_add_goal()
        
        Button:
            text: "Cancel"
            background_color: app.red
            size_hint_y: 0.5
            on_release:
                app.root.current = "home"
                root.manager.transition.direction = "right"

<SuccessWindow>
    name: "success"

    BoxLayout:
        orientation: "vertical"
        size_hint_y: 0.5
        pos_hint: {"center_y": 0.5}

        Label:
            text: "Success!"
            font_size: 70
            color: app.green
        
        Label:
            text: "Goal has been added.\nPlease Click below to continue."
        
        Button:
            text: "Return to home page"
            background_color: app.green
            on_release: 
                app.root.current = "home"
                root.manager.transition.direction = "right"

<SessionWindow>
    name: "session"

    BoxLayout:
        orientation: "vertical"
        
        Label:
            id: goal_name
            font_size: sp(50)
        
        Label:
            id: cycle_range
        
        Label:
            id: target_time
        
        Label:
            id: current_progress
        
        Button:
            id: start_stop
            size_hint_y: 0.7
            on_release: 
                root.start_thread()
        
        Button:
            id: back
            text: "Back"
            background_color: app.red
            size_hint_y: 0.7
            on_release:
                root.session.stop()
                app.root.current = "details"
                root.manager.transition.direction = "right"
                